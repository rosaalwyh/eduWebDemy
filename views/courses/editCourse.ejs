<%- include('../layouts/header') %>

<div class="container">
    <div class="p-3">
      <% if (errMsg) { %>
        <% errMsg.forEach(errEl => { %>
          <div class="alert alert-danger" role="alert">
            <%=errEl%>
          </div>
          <% }) %>
      <% } %>
        <h1>Add new course</h1>
        <form action="/courses/edit/<%=course.id%>" method="post" class="mt-4">
            <div class="row mb-3">
                <div class="col-lg-6">
                    <label for="name" class="col-sm-2 col-form-label">Name</label>
                    <div class="col-sm-10">
                      <input type="text" class="form-control" id="name" name="name" value="<%=course.name%>">
                    </div>
                </div>
                <div class="col-lg-6">
                    <label for="inputState" class="form-label">Category</label>
                    <select id="inputState" class="form-select" name="CategoryId">
                      <option value="" selected>Choose...</option>
                      <% category.forEach(cat => { %>
                        <% if (course.CategoryId === cat.id) { %>
                          <option value="<%=cat.id%>" selected><%=cat.name%></option>
                        <% } else { %>
                          <option value="<%=cat.id%>"><%=cat.name%></option>
                        <% } %>
                      <% }) %>
                    </select>
                  </div>
            </div>
            <div class="row mb-3">
                <div class="col-lg-6">
                    <label for="duration" class="col-sm-2 col-form-label">Duration</label>
                    <div class="col-sm-10">
                      <input type="number" class="form-control" id="duration" name="duration" value="<%=course.duration%>">
                    </div>
                </div>
                <div class="col-lg-6">
                    <label for="inputState" class="form-label">User</label>
                    <select id="inputState" class="form-select" name="UserId">
                      <% users.forEach(user => { %>
                        <% if (course.UserId === user.id) { %>
                          <option value="<%=user.id%>" selected><%=user.username%></option>
                        <% } else { %>
                          <option value="<%=user.id%>"><%=user.username%></option>
                        <% } %>
                      <% }) %>
                    </select>
                  </div>
            </div>
            <div class="mb-3">
              <label for="description" class="form-label">Description</label>
              <textarea class="form-control" id="description" rows="3" name="description"><%=course.description%></textarea>
            </div>
            <button type="submit" class="btn btn-outline-info">Submit</button>
            <a href="/courses" class="btn btn-outline-success">Cancel</a>
          </form>
    </div>
</div>

<%- include('../layouts/footer') %>